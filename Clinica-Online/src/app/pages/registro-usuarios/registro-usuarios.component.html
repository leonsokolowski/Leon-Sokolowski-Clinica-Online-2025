<div class="container">
  <div class="registration-wrapper">
    
    <!-- Tarjeta Izquierda -->
    <div class="left-card">
      <h1 class="form-title">Registro de Paciente</h1>
      
      <div class="form-content">
        <form [formGroup]="registroForm" (ngSubmit)="registrar()">
          
          <!-- Secci√≥n de Datos de Acceso -->
          <h3 class="form-section-title">Datos de Acceso</h3>
          
          <!-- Correo -->
          <div class="form-group">
            <label for="correo">Correo Electr√≥nico:</label>
            <input id="correo" formControlName="correo" type="email" class="form-control" 
                   placeholder="ejemplo@correo.com" />
            <div *ngIf="f['correo'].touched && f['correo'].invalid" class="error-container">
              <small *ngIf="f['correo'].errors?.['required']">El correo es obligatorio.</small>
              <small *ngIf="f['correo'].errors?.['email']">El correo no es v√°lido.</small>
            </div>
          </div>

          <!-- Contrase√±a -->
          <div class="form-group">
            <label for="contrase√±a">Contrase√±a:</label>
            <input id="contrase√±a" formControlName="contrase√±a" type="password" class="form-control" 
                   placeholder="M√≠nimo 6 caracteres, una may√∫scula y un n√∫mero" />
            <div *ngIf="f['contrase√±a'].touched && f['contrase√±a'].invalid" class="error-container">
              <small *ngIf="f['contrase√±a'].errors?.['required']">La contrase√±a es obligatoria.</small>
              <small *ngIf="f['contrase√±a'].errors?.['minlength']">La contrase√±a debe tener al menos 6 caracteres.</small>
              <small *ngIf="f['contrase√±a'].errors?.['pattern']">La contrase√±a debe tener al menos una letra may√∫scula y un n√∫mero.</small>
            </div>
          </div>

          <!-- Confirmar Contrase√±a -->
          <div class="form-group">
            <label for="confirmarContrase√±a">Confirmar Contrase√±a:</label>
            <input id="confirmarContrase√±a" formControlName="confirmarContrase√±a" type="password" class="form-control" 
                   placeholder="Repite tu contrase√±a" />
            <div *ngIf="f['confirmarContrase√±a'].touched && f['confirmarContrase√±a'].invalid" class="error-container">
              <small *ngIf="f['confirmarContrase√±a'].errors?.['required']">La confirmaci√≥n de la contrase√±a es obligatoria.</small>
              <small *ngIf="f['confirmarContrase√±a'].errors?.['noMatch']">Las contrase√±as no coinciden.</small>
            </div>
          </div>

          <!-- Secci√≥n de Datos Personales -->
          <h3 class="form-section-title">Datos Personales</h3>

          <!-- Nombre -->
          <div class="form-group">
            <label for="nombre">Nombre:</label>
            <input id="nombre" formControlName="nombre" type="text" class="form-control" 
                   placeholder="Tu nombre" />
            <div *ngIf="f['nombre'].touched && f['nombre'].invalid" class="error-container">
              <small *ngIf="f['nombre'].errors?.['required']">El nombre es obligatorio.</small>
              <small *ngIf="f['nombre'].errors?.['minlength']">El nombre debe tener al menos 2 caracteres.</small>
            </div>
          </div>

          <!-- Apellido -->
          <div class="form-group">
            <label for="apellido">Apellido:</label>
            <input id="apellido" formControlName="apellido" type="text" class="form-control" 
                   placeholder="Tu apellido" />
            <div *ngIf="f['apellido'].touched && f['apellido'].invalid" class="error-container">
              <small *ngIf="f['apellido'].errors?.['required']">El apellido es obligatorio.</small>
              <small *ngIf="f['apellido'].errors?.['minlength']">El apellido debe tener al menos 2 caracteres.</small>
            </div>
          </div>
        </form>
      </div>
    </div>

    <!-- Tarjeta Derecha -->
    <div class="right-card">
      <div class="form-content">
        <form [formGroup]="registroForm" (ngSubmit)="registrar()">
          
          <!-- Continuaci√≥n de Datos Personales -->
          <h3 class="form-section-title">Informaci√≥n Adicional</h3>

          <!-- Edad -->
          <div class="form-group">
            <label for="edad">Edad:</label>
            <input id="edad" formControlName="edad" type="number" class="form-control" 
                   placeholder="Tu edad" min="1" max="120" />
            <div *ngIf="f['edad'].touched && f['edad'].invalid" class="error-container">
              <small *ngIf="f['edad'].errors?.['required']">La edad es obligatoria.</small>
              <small *ngIf="f['edad'].errors?.['min']">Debes tener al menos 1 a√±o.</small>
            </div>
          </div>

          <!-- DNI -->
          <div class="form-group">
            <label for="dni">DNI:</label>
            <input id="dni" formControlName="dni" type="text" class="form-control" 
                   placeholder="12345678" maxlength="8" />
            <div *ngIf="f['dni'].touched && f['dni'].invalid" class="error-container">
              <small *ngIf="f['dni'].errors?.['required']">El DNI es obligatorio.</small>
              <small *ngIf="f['dni'].errors?.['pattern']">El DNI debe tener entre 7 y 8 d√≠gitos.</small>
            </div>
          </div>

          <!-- Obra Social -->
          <div class="form-group">
            <label for="obraSocial">Obra Social:</label>
            <input id="obraSocial" formControlName="obraSocial" type="text" class="form-control" 
                   placeholder="Nombre de tu obra social" />
            <div *ngIf="f['obraSocial'].touched && f['obraSocial'].invalid" class="error-container">
              <small *ngIf="f['obraSocial'].errors?.['required']">La obra social es obligatoria.</small>
              <small *ngIf="f['obraSocial'].errors?.['minlength']">La obra social debe tener al menos 2 caracteres.</small>
            </div>
          </div>

          <!-- Im√°genes de Perfil -->
          <div class="images-section">
            <div class="form-group">
              <label>Im√°genes de Perfil (2 requeridas):</label>
              
              <!-- Primera imagen -->
              <div class="image-upload-container">
                <label for="imagen1" class="image-upload-label">
                  <div class="upload-placeholder" *ngIf="!previewUrls[0]">
                    <span>üì∑</span>
                    <p>Subir primera imagen</p>
                  </div>
                  <img *ngIf="previewUrls[0]" [src]="previewUrls[0]" alt="Preview 1" class="image-preview" />
                </label>
                <input id="imagen1" type="file" accept="image/*" 
                       (change)="onFileSelected($event, 0)" class="file-input" />
                <button *ngIf="previewUrls[0]" type="button" class="remove-image-btn" 
                        (click)="removeImage(0)">‚úï</button>
              </div>

              <!-- Segunda imagen -->
              <div class="image-upload-container">
                <label for="imagen2" class="image-upload-label">
                  <div class="upload-placeholder" *ngIf="!previewUrls[1]">
                    <span>üì∑</span>
                    <p>Subir segunda imagen</p>
                  </div>
                  <img *ngIf="previewUrls[1]" [src]="previewUrls[1]" alt="Preview 2" class="image-preview" />
                </label>
                <input id="imagen2" type="file" accept="image/*" 
                       (change)="onFileSelected($event, 1)" class="file-input" />
                <button *ngIf="previewUrls[1]" type="button" class="remove-image-btn" 
                        (click)="removeImage(1)">‚úï</button>
              </div>
            </div>
          </div>

          <!-- Mensajes de error y √©xito -->
          <div *ngIf="successMessage || errorMessage" class="alert-container">
            <div *ngIf="successMessage" class="alert alert-success">
              {{ successMessage }}
            </div>
            <div *ngIf="errorMessage" class="alert alert-danger">
              {{ errorMessage }}
            </div>
          </div>

          <!-- Secci√≥n del bot√≥n - se empuja hacia abajo -->
          <div class="button-section">
            <!-- Bot√≥n de registro -->
            <button type="submit" class="btn btn-primary" [disabled]="isLoading">
              <span *ngIf="!isLoading">Registrar</span>
              <span *ngIf="isLoading">Registrando...</span>
            </button>

            <!-- Enlaces -->
            <div class="links-container">
              <a routerLink="/login" class="login-link">¬øYa ten√©s una cuenta? Inici√° Sesi√≥n</a>
            </div>
          </div>
        </form>
      </div>
    </div>
    
  </div>
</div>