<div class="container">
  <div class="registration-wrapper">
    
    <!-- Tarjeta Izquierda -->
    <div class="left-card">
      <h1 class="form-title">Registro de Administrador</h1>
      
      <div class="form-content">
        <form [formGroup]="registroForm" (ngSubmit)="confirmarRegistro()">
          
          <!-- Secci√≥n de Datos de Acceso -->
          <h3 class="form-section-title">Datos de Acceso</h3>
          
          <!-- Correo -->
          <div class="form-group">
            <label for="correo">Correo Electr√≥nico:</label>
            <input id="correo" formControlName="correo" type="email" class="form-control" 
                   placeholder="ejemplo@correo.com" />
            <div *ngIf="f['correo'].touched && f['correo'].invalid" class="error-container">
              <small *ngIf="f['correo'].errors?.['required']">El correo es obligatorio.</small>
              <small *ngIf="f['correo'].errors?.['email']">El correo no es v√°lido.</small>
            </div>
          </div>

          <!-- Contrase√±as lado a lado -->
          <div class="form-row">
            <!-- Contrase√±a -->
            <div class="form-group form-group-half">
              <label for="contrase√±a">Contrase√±a:</label>
              <input id="contrase√±a" formControlName="contrase√±a" type="password" class="form-control" 
                     placeholder="M√≠n. 6 caracteres" />
              <div *ngIf="f['contrase√±a'].touched && f['contrase√±a'].invalid" class="error-container">
                <small *ngIf="f['contrase√±a'].errors?.['required']">La contrase√±a es obligatoria.</small>
                <small *ngIf="f['contrase√±a'].errors?.['minlength']">M√≠nimo 6 caracteres.</small>
                <small *ngIf="f['contrase√±a'].errors?.['pattern']">Debe tener may√∫scula y n√∫mero.</small>
              </div>
            </div>

            <!-- Confirmar Contrase√±a -->
            <div class="form-group form-group-half">
              <label for="confirmarContrase√±a">Confirmar Contrase√±a:</label>
              <input id="confirmarContrase√±a" formControlName="confirmarContrase√±a" type="password" class="form-control" 
                     placeholder="Repite contrase√±a" />
              <div *ngIf="f['confirmarContrase√±a'].touched && f['confirmarContrase√±a'].invalid" class="error-container">
                <small *ngIf="f['confirmarContrase√±a'].errors?.['required']">Confirmaci√≥n obligatoria.</small>
                <small *ngIf="f['confirmarContrase√±a'].errors?.['noMatch']">Las contrase√±as no coinciden.</small>
              </div>
            </div>
          </div>

          <!-- Secci√≥n de Datos Personales -->
          <h3 class="form-section-title">Datos Personales</h3>

          <!-- Nombre y Apellido lado a lado -->
          <div class="form-row">
            <!-- Nombre -->
            <div class="form-group form-group-half">
              <label for="nombre">Nombre:</label>
              <input id="nombre" formControlName="nombre" type="text" class="form-control" 
                     placeholder="Tu nombre" />
              <div *ngIf="f['nombre'].touched && f['nombre'].invalid" class="error-container">
                <small *ngIf="f['nombre'].errors?.['required']">El nombre es obligatorio.</small>
                <small *ngIf="f['nombre'].errors?.['minlength']">M√≠nimo 2 caracteres.</small>
              </div>
            </div>

            <!-- Apellido -->
            <div class="form-group form-group-half">
              <label for="apellido">Apellido:</label>
              <input id="apellido" formControlName="apellido" type="text" class="form-control" 
                     placeholder="Tu apellido" />
              <div *ngIf="f['apellido'].touched && f['apellido'].invalid" class="error-container">
                <small *ngIf="f['apellido'].errors?.['required']">El apellido es obligatorio.</small>
                <small *ngIf="f['apellido'].errors?.['minlength']">M√≠nimo 2 caracteres.</small>
              </div>
            </div>
          </div>
        </form>
      </div>
    </div>

    <!-- Tarjeta Derecha -->
    <div class="right-card">
      <div class="form-content">
        <form [formGroup]="registroForm" (ngSubmit)="confirmarRegistro()">
          
          <!-- Secci√≥n de Datos Adicionales -->
          <h3 class="form-section-title">Datos Adicionales</h3>

          <!-- Edad y DNI lado a lado -->
          <div class="form-row">
            <!-- Edad -->
            <div class="form-group form-group-half">
              <label for="edad">Edad:</label>
              <input id="edad" formControlName="edad" type="number" class="form-control" 
                     placeholder="Tu edad" min="18" max="120" />
              <div *ngIf="f['edad'].touched && f['edad'].invalid" class="error-container">
                <small *ngIf="f['edad'].errors?.['required']">La edad es obligatoria.</small>
                <small *ngIf="f['edad'].errors?.['min']">M√≠nimo 18 a√±os.</small>
              </div>
            </div>

            <!-- DNI -->
            <div class="form-group form-group-half">
              <label for="dni">DNI:</label>
              <input id="dni" formControlName="dni" type="text" class="form-control" 
                     placeholder="12345678" maxlength="8" />
              <div *ngIf="f['dni'].touched && f['dni'].invalid" class="error-container">
                <small *ngIf="f['dni'].errors?.['required']">El DNI es obligatorio.</small>
                <small *ngIf="f['dni'].errors?.['pattern']">Entre 7 y 8 d√≠gitos.</small>
              </div>
            </div>
          </div>
          
          <!-- Imagen de Perfil -->
          <div class="images-section">
            <h3 class="form-section-title">Imagen de Perfil</h3>
            
            <div class="form-group">
              <label>Imagen de Perfil (requerida):</label>
              
              <!-- Imagen de perfil -->
              <div class="image-upload-container">
                <label for="imagen1" class="image-upload-label">
                  <div class="upload-placeholder" *ngIf="!previewUrl">
                    <span>üîê</span>
                    <p>Subir imagen de perfil</p>
                  </div>
                  <img *ngIf="previewUrl" [src]="previewUrl" alt="Preview" class="image-preview" />
                </label>
                <input id="imagen1" type="file" accept="image/*" 
                       (change)="onFileSelected($event)" class="file-input" />
                <button *ngIf="previewUrl" type="button" class="remove-image-btn" 
                        (click)="removeImage()">‚úï</button>
              </div>

              <!-- Error de imagen -->
              <div *ngIf="!imagenSeleccionada && mostrarErrorImagen" class="error-container">
                <small>Debes seleccionar una imagen de perfil.</small>
              </div>
            </div>
          </div>

          <!-- Mensajes de error y √©xito -->
          <div *ngIf="successMessage || errorMessage" class="alert-container">
            <div *ngIf="successMessage" class="alert alert-success">
              {{ successMessage }}
            </div>
            <div *ngIf="errorMessage" class="alert alert-danger">
              {{ errorMessage }}
            </div>
          </div>

          <!-- Secci√≥n del bot√≥n - se empuja hacia abajo -->
          <div class="button-section">
            <!-- Bot√≥n de registro -->
            <button type="submit" class="btn btn-primary" [disabled]="isLoading">
              <span *ngIf="!isLoading">Registrar Administrador</span>
              <span *ngIf="isLoading">Registrando...</span>
            </button>

            <!-- Enlaces -->
            <div class="links-container">
              <a routerLink="/login" class="login-link">¬øYa ten√©s una cuenta? Inici√° Sesi√≥n</a>
            </div>
          </div>
        </form>
      </div>
    </div>
    
  </div>
</div>

<!-- Modal de confirmaci√≥n -->
<div *ngIf="mostrarModal" class="modal-overlay" (click)="cancelarRegistro()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <h3 class="modal-title">‚ö†Ô∏è Advertencia</h3>
    <p class="modal-message">
      Al registrar un nuevo administrador, tu sesi√≥n actual se cerrar√° autom√°ticamente. 
      ¬øEst√°s seguro de que deseas continuar?
    </p>
    <div class="modal-buttons">
      <button type="button" class="btn btn-secondary" (click)="cancelarRegistro()">
        Cancelar
      </button>
      <button type="button" class="btn btn-confirm" (click)="procederConRegistro()">
        Continuar
      </button>
    </div>
  </div>
</div>